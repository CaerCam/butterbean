!function(e){function t(t){return"#"+e(t).parents(".butterbean-control").attr("id")}function n(n){var a=t(n),r="";if("undefined"==typeof butterbean_control_image_modal)butterbean_control_image_modal=[];else if("undefined"!=typeof butterbean_control_image_modal[a])return r=butterbean_control_image_modal[a],r.open(),void 0;r=butterbean_control_image_modal[a]=wp.media.frames.butterbean_control_image_modal=wp.media({frame:"select",multiple:!1,editing:!0,title:butterbean_control_image.choose,library:{type:"image"},button:{text:butterbean_control_image.set}}),r.on("select",function(){var t=r.state().get("selection").first().toJSON();console.log(t),t.sizes.large?e(a+" .butterbean-img").attr("src",t.sizes.large.url):e(a+" .butterbean-img").attr("src",t.url).show(),e(a+" .butterbean-attachment-id").val(t.id),e(a+" .butterbean-placeholder").hide(),e(a+" .butterbean-add-media").hide(),e(a+" .butterbean-change-media").show(),e(a+" .butterbean-remove-media").show()}),r.open()}function a(n){var a=t(n);e(a+" .butterbean-img").show(),e(a+" .butterbean-placeholder").hide(),e(a+" .butterbean-add-media").hide(),e(a+" .butterbean-change-media").show(),e(a+" .butterbean-remove-media").show()}function r(n){var a=t(n);e(a+" .butterbean-attachment-id").val(""),e(a+" .butterbean-img").attr("src","").hide(),e(a+" .butterbean-placeholder").show(),e(a+" .butterbean-add-media").show(),e(a+" .butterbean-change-media").hide(),e(a+" .butterbean-remove-media").hide()}var i=".butterbean-control-image";e(i+" .butterbean-img").each(function(){e(this).attr("src")?a(this):r(this)}),e(i+" .butterbean-add-media, "+i+" .butterbean-change-media").click(function(){n(this)}),e(i+" .butterbean-remove-media").click(function(){r(this)})}(jQuery);