!function(e){var t={managers:{},sections:{},controls:{}};if("undefined"!=typeof butterbean_data){var n=Backbone.Model.extend({defaults:{name:"",type:""}}),a=Backbone.Model.extend({defaults:{name:"",type:"",label:"",description:"",icon:"",controls:{},manager:""}}),r=Backbone.Model.extend({defaults:{name:"",type:"",label:"",description:"",icon:"",value:"",choices:{},attr:"",manager:"",section:"",setting:""}}),i=Backbone.Collection.extend({model:n});Backbone.Collection.extend({model:a});var s=Backbone.View.extend({collection:null,initialize:function(e){this.collection=e.collection,_.bindAll(this,"render"),this.collection.bind("reset",this.render),this.collection.bind("add",this.render),this.collection.bind("remove",this.render),this.render()},render:function(){return jQuery(this.el).empty(),this.collection.forEach(function(e){new o({model:e,el:"#butterbean-ui-"+e.name+" .inside"})}),this}}),o=Backbone.View.extend({initialize:function(){this.el="#butterbean-ui-"+this.model.attributes.name+" .inside",this.template=t.managers[this.model.attributes.type],this.render()},render:function(){this.$el.append(this.template(this.model.toJSON())),console.log(this)}});Backbone.View.extend({collection:null,initialize:function(e){this.collection=e.collection,_.bindAll(this,"render"),this.collection.bind("reset",this.render),this.collection.bind("add",this.render),this.collection.bind("remove",this.render)},render:function(){return jQuery(this.el).empty(),this.collection.forEach(function(e){new c({model:e,el:"#butterbean-ui-"+e.attributes.manager+" .butterbean-content"})}),this}});var c=Backbone.View.extend({initialize:function(){this.controls=this.model.attributes.controls,this.template=t.sections[this.model.attributes.type],this.render()},render:function(){this.$el.append(this.template(this.model.toJSON())),_.each(this.model.attributes.controls,function(e){var t=new r(e);new l({model:new r(e),el:"#butterbean-"+t.attributes.manager+"-section-"+t.attributes.section})})}}),l=Backbone.View.extend({initialize:function(){this.template=t.controls[this.model.attributes.type],this.render()},render:function(){this.$el.append(this.template(this.model.toJSON()))}});wp.template("butterbean-nav");var u=new i;_.each(butterbean_data.managers,function(a){var r="#butterbean-ui-"+a.name;"undefined"==typeof t.managers[a.type]&&(t.managers[a.type]=wp.template("butterbean-manager-"+a.type)),u.add(new n(a)),e(r).addClass("butterbean-ui"),_.each(a.sections,function(e){"undefined"==typeof t.sections[e.type]&&(t.sections[e.type]=wp.template("butterbean-section-"+e.type)),_.each(e.controls,function(e){"undefined"==typeof t.controls[e.type]&&(t.controls[e.type]=wp.template("butterbean-control-"+e.type))})})}),new s({collection:u})}e(".butterbean-ui .hndle").addClass("butterbean-title"),e(".butterbean-ui .butterbean-description").addClass("description"),e(".butterbean-section").hide(),e(".butterbean-section:first-of-type").show(),e(".butterbean-nav :first-child").attr("aria-selected","true"),e(".butterbean-title").append(' <span class="butterbean-which-tab" />'),e(".butterbean-which-tab").each(function(){var t=e(this).parents(".butterbean-ui").find(".butterbean-nav :first-child a").text();e(this).text(t)}),e(".butterbean-nav li a").click(function(t){t.preventDefault();var n=e(this).parents(".butterbean-ui");e(n).find(".butterbean-section").hide(),e(n).find(e(this).attr("href")).show(),e(n).find(".butterbean-nav li").attr("aria-selected","false"),e(this).parent().attr("aria-selected","true"),e(n).find(".butterbean-which-tab").text(e(this).text())})}(jQuery);