!function(e){if("undefined"!=typeof butterbean_data){var t={managers:{},sections:{},controls:{}},n=wp.template("butterbean-nav"),a=Backbone.Model.extend({defaults:{name:"",type:"",sections:{},controls:{}}}),r=Backbone.Model.extend({defaults:{name:"",type:"",label:"",description:"",icon:"",manager:"",active:!1}}),i=Backbone.Model.extend({defaults:{name:"",type:"",label:"",description:"",icon:"",value:"",choices:{},attr:"",manager:"",section:"",setting:""}}),s=Backbone.Collection.extend({model:r}),o=Backbone.View.extend({tagName:"div",attributes:function(){return{id:"butterbean-manager-"+this.model.get("name"),"class":"butterbean-manager butterbean-manager-"+this.model.get("type")}},initialize:function(){var e=this.model.get("type");"undefined"==typeof t.managers[e]&&(t.managers[e]=wp.template("butterbean-manager-"+e)),this.template=t.managers[e]},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},subview_render:function(){var t=new s;return _.each(this.model.get("sections"),function(e){t.add(new r(e))}),t.forEach(function(t,n){var a=new l({model:t}),r=new c({model:t});e("#butterbean-ui-"+t.get("manager")+" .butterbean-nav").append(a.render().el),e("#butterbean-ui-"+t.get("manager")+" .butterbean-content").append(r.render().el),t.set("active",0==n)},this),_.each(this.model.get("controls"),function(t){var n=new i(t),a=new u({model:n});e("#butterbean-"+n.get("manager")+"-section-"+n.get("section")).append(a.render().el)}),this}}),c=Backbone.View.extend({tagName:"div",attributes:function(){return{id:"butterbean-"+this.model.get("manager")+"-section-"+this.model.get("name"),"class":"butterbean-section butterbean-section-"+this.model.get("type"),"aria-hidden":!this.model.get("active")}},initialize:function(){this.model.on("change",this.onchange,this);var e=this.model.get("type");"undefined"==typeof t.sections[e]&&(t.sections[e]=wp.template("butterbean-section-"+e)),this.template=t.sections[e]},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},onchange:function(){this.$el.attr("aria-hidden",!this.model.get("active"))}}),l=Backbone.View.extend({template:n,tagName:"li",attributes:function(){return{"aria-selected":this.model.get("active")}},initialize:function(){this.model.on("change",this.render,this),this.model.on("change",this.onchange,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},events:{"click a":"onselect"},onchange:function(){this.$el.attr("aria-selected",this.model.get("active"))},onselect:function(e){e.preventDefault(),_.each(this.model.collection.models,function(e){e.set("active",!1)},this),this.model.set("active",!0)}}),u=Backbone.View.extend({tagName:"div",attributes:function(){return{id:"butterbean-control-"+this.model.get("name"),"class":"butterbean-control butterbean-control-"+this.model.get("type")}},initialize:function(){var e=this.model.get("type");"undefined"==typeof t.controls[e]&&(t.controls[e]=wp.template("butterbean-control-"+e)),this.template=t.controls[e]},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});_.each(butterbean_data.managers,function(t){var n=new a(t),r=new o({model:n});e("#butterbean-ui-"+n.get("name")).addClass("butterbean-ui"),e("#butterbean-ui-"+n.get("name")+" .inside").append(r.render().el),r.subview_render()}),e(".butterbean-ui .hndle").addClass("butterbean-title"),e(".butterbean-ui .butterbean-description").addClass("description"),e("input:radio:checked",".butterbean-control-palette").parent("label").addClass("selected"),e("input:radio",".butterbean-control-palette").change(function(){var t=e(this).parents(".butterbean-control-palette");e("label.selected",t).removeClass("selected"),e(this).parent("label").addClass("selected")})}}(jQuery);