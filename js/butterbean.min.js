!function(e){if("undefined"!=typeof butterbean_data){var t={managers:{},sections:{},controls:{}},n=wp.template("butterbean-nav"),a=Backbone.Model.extend({defaults:{name:"",type:"",sections:{},controls:{}}}),r=Backbone.Model.extend({defaults:{name:"",type:"",label:"",description:"",icon:"",manager:""}}),i=Backbone.Model.extend({defaults:{name:"",type:"",label:"",description:"",icon:"",value:"",choices:{},attr:"",manager:"",section:"",setting:""}}),s=Backbone.Collection.extend({model:a}),o=Backbone.View.extend({collection:null,render:function(){return jQuery(this.el).empty(),this.collection.forEach(function(e){var t=new c({model:e,el:"#butterbean-ui-"+e.attributes.name+" .inside"});t.render()}),this}}),c=Backbone.View.extend({initialize:function(){var e=this.model.attributes.type;"undefined"==typeof t.managers[e]&&(t.managers[e]=wp.template("butterbean-manager-"+e)),this.template=t.managers[e]},render:function(){return this.$el.append(this.template(this.model.toJSON())),_.each(this.model.attributes.sections,function(t){var a=new r(t);e("#butterbean-ui-"+a.attributes.manager+" .butterbean-nav").append(n(a.attributes));var i=new l({model:a,el:"#butterbean-ui-"+a.attributes.manager+" .butterbean-content"});i.render()}),_.each(this.model.attributes.controls,function(e){var t=new i(e),n=new u({model:t,el:"#butterbean-"+t.attributes.manager+"-section-"+t.attributes.section});n.render()}),this}}),l=Backbone.View.extend({initialize:function(){var e=this.model.attributes.type;"undefined"==typeof t.sections[e]&&(t.sections[e]=wp.template("butterbean-section-"+e)),this.template=t.sections[e]},render:function(){this.$el.append(this.template(this.model.toJSON()))}}),u=Backbone.View.extend({initialize:function(){var e=this.model.attributes.type;"undefined"==typeof t.controls[e]&&(t.controls[e]=wp.template("butterbean-control-"+e)),this.template=t.controls[e]},render:function(){this.$el.append(this.template(this.model.toJSON()))}}),b=new s;_.each(butterbean_data.managers,function(t){b.add(new a(t)),e("#butterbean-ui-"+t.name).addClass("butterbean-ui")});var d=new o({collection:b});d.render(),e(".butterbean-ui .hndle").addClass("butterbean-title"),e(".butterbean-ui .butterbean-description").addClass("description"),e(".butterbean-section").hide(),e(".butterbean-section:first-of-type").show(),e(".butterbean-nav :first-child").attr("aria-selected","true"),e(".butterbean-title").append(' <span class="butterbean-which-tab" />'),e(".butterbean-which-tab").each(function(){var t=e(this).parents(".butterbean-ui").find(".butterbean-nav :first-child a").text();e(this).text(t)}),e(".butterbean-nav li a").click(function(t){t.preventDefault();var n=e(this).parents(".butterbean-ui");e(n).find(".butterbean-section").hide(),e(n).find(e(this).attr("href")).show(),e(n).find(".butterbean-nav li").attr("aria-selected","false"),e(this).parent().attr("aria-selected","true"),e(n).find(".butterbean-which-tab").text(e(this).text())})}}(jQuery);